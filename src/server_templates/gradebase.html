<!-- gradebase template for slidoc server (SNIPPET) --->
<!-- gradebase parameters: site_name, session_name, user_id, grades -->

<style>
.clickable { cursor: pointer; color: #2980B9; text-decoration: none}

.clickable:hover {text-decoration: underline;}
</style>

{% set site_prefix = '/'+site_name if site_name else '' %}

{% if grades.get('total') and grades['total']['score'] is not None %}
<em>Weighted total</em>: <b>{{ '%.2f' % grades['total']['score'] }}</b>
 <b>{% if grades['total']['score'] %}</b>out of {{ '%.2f' % grades['total']['maxscore'] }}{% end %}
    {% if grades['total']['rescale'] %}<br>&nbsp;&nbsp;&nbsp;Weighting= {{ grades['total']['rescale'].replace('+',' + ') }}{% end %}
<br>
{% end %}

{% if grades.get('grade') and grades['grade']['score'] %}
<p></p><em>Potential grade</em>: {{ grades['grade']['score'] }} &nbsp;&nbsp;
<br>(This is a tentative letter grade estimate based on the
credits/curving earned so far; the final grade may
be different, depending upon any additional credits/corrrections/curving)
<br>
{% end %}

{% if grades.get('sessions') %}
  {% set prefix = '' %}
  {% for session, sessionGrades in grades['sessions'] %}
    {% if not session.startswith('_') %}
      {% set comps = session.split('_') %}
      {% set prefix = '_'.join(comps[:-1]) %}
<p></p>{{ prefix+'('+comps[-1]+')=' }}
    {% else %}
<br>
      {% if prefix and session[1:].startswith(prefix) %}
&nbsp;&nbsp;&nbsp; <a class="clickable" href="{{ site_prefix  }}/_private/{{ prefix }}/{{ session[1:] }}.html">{{ session[1:] }}</a>:
      {% else %}
        {% set prefix = '' %}
<p></p><a class="clickable" href="{{ site_prefix  }}/_private/{{ prefix }}/{{ session[1:] }}.html">{{ session[1:] }}</a>:
      {% end %}
    {% end %}
    {% if sessionGrades['score'] is not None %}
<b>{{ '%.4g' % sessionGrades['score'] }}</b>
    {% else %}
missed
    {% end %}
     {% if sessionGrades['maxscore'] is not None %}
/ {{ '%0.4g' % sessionGrades['maxscore'] }}
    {% end %}
    {% if sessionGrades['average'] is not None %}
(avg={{ '%.2f' % sessionGrades['average'] }})
    {% end %}
    {% if sessionGrades['rescale'] %}
      {% if 'drop' in sessionGrades['rescale']  %}
[ {{ sessionGrades['rescale'] }} ]
      {% else %}
rescaled
      {% end %}
    {% end %}
  {% end %}
{% end %}
