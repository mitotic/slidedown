<style>
body {
    font-family: sans-serif;
}
</style>
<script>
function action(label) {
  var statusElem = document.getElementById('actionstatus');
  if (statusElem) statusElem.textContent = 'Processing...';
  window.location = '/_' + label;
}
function check(label) {
  if (!window.confirm('Confirm '+label+'?'))
    return;
  action(label);
}
function sheet(label) {
  var value = window.prompt('Sheet name:');
  if (!value)
    return;
  action(label+'/'+value);
}
</script>

<div id="dashboarddiv">
  <h2>{{site_label}} dashboard </h2>
  <h3>(Slidoc version {{version}})</h3>

  <a href="/">Home</a>
  <p></p>
  <span id="actionstatus"></span>
  <ul>
    <li><a href="javascript:action('sessions')">sessions</a>: Session info and actions</li>
    <hr>
    <li><a href="javascript:action('roster')">roster</a>: List roster of students</li>
    <hr>
    <li><a href="javascript:action('twitter')">twitter</a>: View twitter stream status</li>
    <hr>
    <li><a href="javascript:check('backup')">backup</a>: Backup all sessions</li>
    <hr>
    <li><a href="javascript:check('reload')">reload</a>: Restart proxy server</li>
    <hr>
    <li><a href="javascript:check('shutdown')">shutdown</a>: Shutdown proxy server</li>
  </ul>
  Suspend status: <b>{{suspended}}</b><br>
  Current interactive session: <a href="/_manage/{{interactive}}">{{interactive}}</a><br>
  <p></p>
  <a href="#" onclick="document.getElementById('advanced-options').style.display=null;this.style.display='none'">Show advanced options</a>
  <ul id="advanced-options" style="display: none;">
    <li><a href="javascript:action('cache')">proxy status</a>: Status of proxy cache and active connections</li>
    <hr>
    <li><a href="javascript:check('freeze')">freeze</a>: Freeze all cached sessions (clear to cancel freeze)</li>
    <li><a href="javascript:check('clear')">clear</a>: Clear all cached sessions</li>
    <hr>
    <li><a href="javascript:check('update')">update</a>: Update code and restart proxy server</li>
    <hr>
    <li><a href="javascript:sheet('sheet')">sheet</a>: Display sheet</li>
    <li><a href="javascript:sheet('getrow')">getrow</a>: Get rows from sheet (e.g., <code>settings_slidoc, sessions_slidoc, roster_slidoc</code>)</li>
    <li><a href="javascript:sheet('getcol')">getcol</a>: Get columns from sheet</li>
  </ul>
</div>
