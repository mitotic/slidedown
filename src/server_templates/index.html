<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>

<!-- home index template for slidoc server --->
<!-- index parameters: user, status, login_url, logout_url, global_role, sites, site_roles, site_labels, site_titles, site_hide, site_restrictions -->

<meta name="viewport" content="width=device-width,initial-scale=1">
<meta charset="UTF-8">

<title>Slidoc sites</title>

<style>
body {
  font-family: 'Trebuchet MS', Trebuchet, 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
}

.home-banner {
  background-color: #333;
  color: #ffa500;
  margin: 0;
  padding: 0;
}

.restricted-site { opacity: 0.5; }

.home-banner h2 {
  margin: 2px;
}

.home-title {
  color: #ffa500;
  padding: 7px 8px;
  text-align: left;
}

.home-user {
  color: #ffa500;
  padding: 4px 10px 8px 4px;
  text-align: right;
}

.clickable { padding: 0.2em 0 0 0.8em; }

.clickable-sym { font-size: 140%; }

a.clickable {
  color: #ffa500;
   text-decoration: none;
}

</style>

<script>
function newSite() {
  var siteName = window.prompt('New site name: ');
  if (!siteName)
    return;
  window.location = '/_settings/'+siteName+'?new_site=1';
}
</script>

</head>
<body>

  <div class="home-banner">
    <h2 class="home-title">Slidoc sites {% if global_role == 'admin' %} <a class="clickable" href="/_setup">&#9881;&nbsp;&nbsp;</a>{% end %}</h2>

    <div class="home-user">
      <span><b>{% if user %}User: {{ user}}{% if any(site_roles) %}/special{% end %}</b> (<a class="clickable" href="{{ logout_url }}">logout</a>)
      {% else %}
      <a class="clickable" href="{{ login_url }}">Login</a>
      {% end %}
      </b></span>
    </div>
  </div>

  <b>{{ status }}</b><br>

  <ul>
      {% for j, site in enumerate(sites) %}
        {% if not site_hide[j] %}
        <li {% if site_restrictions[j] and site_restrictions[j] != 'readonly' %} class="restricted-site"{% end %}>{% if site_roles[j] == 'admin' %} <a class="clickable" href="/{{ site }}/_dash">&#9881;</a> {% end %}<a href="/{{ site }}"><b>{{ site_labels[j] }}</b></a>: {% if site_restrictions[j] %}({{site_restrictions[j]}}) {% end %}{{ site_titles[j] }}</li>
        {% end %}
      <p></p>
      {% end %}
  </ul>
  {% if global_role == 'admin' %}
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="clickable clickable-sym" href="javascript:newSite()"><b>+</b></a>
  {% end %}
</body>
</html>


